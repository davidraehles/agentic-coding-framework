@startuml continuous-learning-architecture
!include _standard-style.puml

title Continuous Learning Knowledge System

skinparam defaultFontSize 16
skinparam componentFontSize 14

' Row 1: Sessions
together {
  [Claude\nCode] <<cli>>
  [Copilot] <<cli>>
  [Cursor] <<cli>>
}

' Row 2: Adapters
together {
  interface "Adapter\nAPI" as API <<api>>
  [Claude\nAdapter] <<agent>>
  [Copilot\nAdapter] <<agent>>
  [Generic\nAdapter] <<agent>>
}

' Row 3: Core Processing
together {
  [Streaming\nExtractor] <<core>>
  [Knowledge\nRetriever] <<core>>
  [Concept\nAbstraction] <<agent>>
  [Temporal\nDecay] <<util>>
}

' Row 4: Inference & Trajectory
together {
  [Unified\nEngine] <<core>>
  [Budget\nTracker] <<util>>
  [Sensitivity] <<util>>
  [Trajectory\nAnalyzer] <<core>>
}

' Row 5: Cache
together {
  [Agent\nCache] <<storage>>
  [File] <<storage>>
  [HTTP] <<storage>>
  [MCP] <<storage>>
}

' Row 6: Storage
together {
  database "Qdrant" as Q
  database "SQLite" as S
  database "Graph" as G
}

' Row 7: Providers
together {
  [Groq] <<provider>>
  [Anthropic] <<provider>>
  [OpenAI] <<provider>>
  [Ollama] <<provider>>
  [vLLM] <<provider>>
}

' Connections
[Claude\nCode] --> API
[Copilot] --> API
[Cursor] --> API

API --> [Claude\nAdapter]
API --> [Copilot\nAdapter]
API --> [Generic\nAdapter]

[Claude\nAdapter] --> [Streaming\nExtractor]
[Copilot\nAdapter] --> [Streaming\nExtractor]
[Generic\nAdapter] --> [Streaming\nExtractor]

[Streaming\nExtractor] --> [Unified\nEngine]
[Knowledge\nRetriever] --> [Unified\nEngine]
[Concept\nAbstraction] --> [Unified\nEngine]
[Trajectory\nAnalyzer] --> [Unified\nEngine]

[Unified\nEngine] --> [Budget\nTracker]
[Unified\nEngine] --> [Sensitivity]
[Unified\nEngine] --> [Groq]
[Unified\nEngine] --> [Anthropic]
[Unified\nEngine] --> [OpenAI]
[Unified\nEngine] --> [Ollama]
[Unified\nEngine] --> [vLLM]

[Streaming\nExtractor] ..> Q
[Streaming\nExtractor] ..> S
[Knowledge\nRetriever] ..> Q
[Knowledge\nRetriever] ..> S
[Concept\nAbstraction] ..> Q
[Temporal\nDecay] ..> Q
[Temporal\nDecay] ..> S

[Unified\nEngine] ..> [Agent\nCache]
[Knowledge\nRetriever] ..> [Agent\nCache]

[Agent\nCache] ..> [File]
[Agent\nCache] ..> [HTTP]
[Agent\nCache] ..> [MCP]

[Budget\nTracker] ..> S
[Trajectory\nAnalyzer] ..> Q
[Trajectory\nAnalyzer] ..> S

[Concept\nAbstraction] ..> G

@enduml
