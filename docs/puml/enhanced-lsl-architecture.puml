@startuml enhanced-lsl-architecture
!include _standard-style.puml
!define TITLE Enhanced LSL System Architecture

title TITLE

package "Enhanced Live Session Logging System" {
  
  component [Global LSL Coordinator] as coordinator <<core>>
  component [LSL File Manager] as fileManager <<storage>>
  component [Enhanced Transcript Monitor] as monitor <<core>>
  component [ReliableCodingClassifier] as classifier <<core>>
  component [LSL Generation Scripts] as generator <<util>>
  
  ' Enhanced Components
  component [Enhanced Redaction System] as redaction <<security>>
  component [Enhanced Operational Logger] as opLogger <<util>>  
  component [User Hash Generator] as userHash <<security>>
  component [Live Logging Coordinator] as liveCoordinator <<core>>
  
  database "Session Files" as sessionDB <<storage>>
  cloud "Claude Transcripts" as transcripts <<external>>
  database "Operational Logs" as opLogs <<storage>>
  database "Performance Metrics" as metrics <<storage>>
  
  package "Security Layer" as security {
    redaction
    userHash
  }
  
  package "Monitoring & Operations" as monitoring {
    opLogger
    metrics
    opLogs
  }
  
  package "Core Processing" as coreProcessing {
    monitor
    classifier
    coordinator
    liveCoordinator
  }
  
  package "Data Management" as dataManagement {
    fileManager  
    generator
    sessionDB
  }
}

' External Systems
actor "Claude Code Sessions" as claude <<external>>
component "Health Monitoring Dashboard" as dashboard <<api>>

' Main flow connections
claude SYNC_LINE monitor
transcripts SYNC_LINE generator
monitor SYNC_LINE classifier
classifier SYNC_LINE fileManager
fileManager SYNC_LINE sessionDB

' Enhanced security flow
monitor SYNC_LINE redaction
redaction SYNC_LINE userHash
userHash SYNC_LINE opLogger

' Coordination flow
coordinator CONTROL_LINE monitor
coordinator CONTROL_LINE liveCoordinator
liveCoordinator CONTROL_LINE fileManager

' Operational monitoring
opLogger DATA_LINE metrics
opLogger DATA_LINE opLogs
metrics DATA_LINE dashboard

' Security isolation
security CONTROL_LINE coreProcessing
monitoring CONTROL_LINE dashboard

note top of security : 98.3% Effectiveness\nBypass Protection\nReal-time Scanning

note top of monitoring : Sub-millisecond Response\nReal-time Health Metrics\nAutomated Alerting

note top of dataManagement : Automatic Rotation\nGzip Compression\nMulti-user Isolation

@enduml