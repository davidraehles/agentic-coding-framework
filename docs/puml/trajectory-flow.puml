@startuml
!include _standard-style.puml

title Capability-Focused Trajectory Generation v2.0

!define PROJECT_COLOR #E8F5E8
!define GENERATION_COLOR #F3E5F5  
!define CAPABILITY_COLOR #FFF3E0
!define OUTPUT_COLOR #E3F2FD

actor "Development Session" as session
participant "Enhanced Monitor" as monitor <<PROJECT_COLOR>>
participant "Project Detection" as detection <<PROJECT_COLOR>>
participant "Trajectory Generator v2" as generator <<GENERATION_COLOR>>
participant "Capability Definitions" as capabilities <<CAPABILITY_COLOR>>
participant "Trajectory Files" as output <<OUTPUT_COLOR>>

== Session Completion ==
session -> monitor : Session ends (60-minute boundary)
monitor -> detection : Identify project (coding/nano-degree)
detection -> generator : Project identifier + session data

== Revolutionary Approach: Capability-Focused Generation ==
generator -> capabilities : Load hardcoded project capabilities
generator -> generator : **ABANDONED**\n• Session activity analysis\n• Meaningless pattern extraction\n• Cryptic temporal summaries
generator -> generator : **NEW APPROACH**\n• Current project state\n• Actual capabilities\n• Infrastructure highlights

== Capability-Based Output Generation ==
alt Project = "coding"
    capabilities -> generator : **Coding Infrastructure Capabilities**\n• Live Session Logging (LSL)\n• Dynamic Status Line\n• Cross-Project Routing\n• Constraint Monitoring\n• Unified Message Processing
    generator -> output : Generate meaningful trajectory
else Project = "nano-degree"  
    capabilities -> generator : **Nano-Degree Course Capabilities**\n• MCP/ACP/A2A Documentation\n• Course Material Structure\n• PlantUML Diagrams\n• Multi-Path Learning System
    generator -> output : Generate meaningful trajectory
else Project = "unknown"
    generator -> output : Generate generic capability summary
end

== Output Structure ==
output -> output : **Project Trajectory Format**\n• Purpose & Focus\n• Current Capabilities List\n• Recent Improvements\n• System Architecture Highlights\n• Living Infrastructure Documentation

== Key Revolution ==
note over generator : **Revolutionary Change**\nFrom meaningless activity logs\nto meaningful capability summaries\n\n**Before:** "development-session, coding-activity"\n**After:** "Live Session Logging captures real-time\ndevelopment activities with timezone-aware\nfile management"

note over capabilities : **Hardcoded Meaningful Summaries**\nPre-defined capability descriptions\nfor known projects ensure:\n• User-valuable content\n• Current state representation\n• Infrastructure documentation quality

note over output : **Living Documentation**\nTrajectory files now serve as:\n• Project capability overview\n• Current infrastructure state\n• System architecture summary\n• User-friendly project documentation

@enduml