constraints:
  # Anti-pattern constraints
  - id: no-console-log
    type: anti-pattern
    severity: error
    matcher: 'console\.log'
    message: 'Use Logger.log() instead of console.log for structured logging'
    correctionAction: block
    enabled: true
    description: 'Enforce structured logging over console.log'
    context: ['ConditionalLoggingPattern']
    examples:
      - bad: 'console.log("Debug info")'
      - good: 'Logger.log("debug", "category", "Debug info")'
    autoCorrect: false
    cooldown: 30
    tags: ['logging', 'anti-pattern']

  - id: no-todo-comments
    type: anti-pattern
    severity: warning
    matcher: 'TODO:|FIXME:|HACK:'
    message: 'TODO comments should be converted to proper issues or completed'
    correctionAction: warn
    enabled: true
    description: 'Discourage TODO comments in production code'
    cooldown: 60
    tags: ['code-quality', 'anti-pattern']

  # Workflow constraints  
  - id: unauthorized-commit
    type: workflow
    severity: critical
    matcher: 'git\s+(commit|push)'
    message: 'Must ask permission before committing changes'
    correctionAction: block
    enabled: true
    description: 'Prevent unauthorized git operations'
    context: ['git-operations']
    cooldown: 0
    tags: ['git', 'authorization']

  - id: excessive-exploration
    type: workflow
    severity: warning
    fileReadLimit: 10
    message: 'Reading too many files for simple task - consider focusing your approach'
    correctionAction: warn
    enabled: true
    description: 'Prevent excessive file exploration'
    cooldown: 120
    tags: ['efficiency', 'workflow']

  - id: destructive-operations
    type: workflow
    severity: critical
    matcher: 'rm\s+-rf|sudo\s+rm|delete\s+from.*where.*1=1'
    message: 'Destructive operations require explicit user confirmation'
    correctionAction: block
    enabled: true
    description: 'Block potentially destructive system operations'
    cooldown: 0
    tags: ['safety', 'destructive']

  # Semantic constraints (require LLM analysis)
  - id: trajectory-alignment
    type: semantic
    severity: warning
    threshold: 5
    message: 'Action appears misaligned with user intent (score below threshold)'
    correctionAction: suggest
    enabled: true
    description: 'Ensure actions align with user goals using semantic analysis'
    cooldown: 30
    tags: ['alignment', 'semantic']

  - id: context-awareness
    type: semantic
    severity: info
    threshold: 6
    message: 'Consider the conversation context when taking this action'
    correctionAction: suggest
    enabled: true
    description: 'Promote context-aware decision making'
    cooldown: 60
    tags: ['context', 'semantic']

  # Security constraints
  - id: api-key-exposure
    type: pattern
    severity: critical
    matcher: 'sk-[a-zA-Z0-9]{40,}|Bearer\s+[a-zA-Z0-9]{20,}'
    message: 'API key or token detected - never commit secrets to repository'
    correctionAction: block
    enabled: true
    description: 'Prevent accidental API key exposure'
    cooldown: 0
    tags: ['security', 'secrets']

  - id: network-requests
    type: workflow
    severity: warning
    matcher: 'curl|wget|fetch.*http|requests\.get'
    message: 'Network requests should be approved by user for security'
    correctionAction: warn
    enabled: true
    description: 'Flag external network access for user awareness'
    cooldown: 60
    tags: ['security', 'network']

  # Code quality constraints
  - id: large-functions
    type: pattern
    severity: info
    matcher: 'function\s+\w+\([^)]*\)\s*\{[\s\S]{500,}'
    message: 'Consider breaking down large functions for better maintainability'
    correctionAction: suggest
    enabled: false  # Disabled by default as it can be noisy
    description: 'Encourage smaller, focused functions'
    cooldown: 300
    tags: ['code-quality', 'maintainability']

  - id: hardcoded-values
    type: pattern
    severity: warning
    matcher: '(http://|https://|localhost:\d+|127\.0\.0\.1:\d+)'
    message: 'Consider using configuration files for URLs and endpoints'
    correctionAction: suggest
    enabled: true
    description: 'Discourage hardcoded URLs and endpoints'
    cooldown: 120
    tags: ['configuration', 'maintainability']

  # Documentation constraints
  - id: missing-error-handling
    type: pattern
    severity: warning
    matcher: '(fetch|axios|request)\([^)]+\)(?![^{]*catch)'
    message: 'Network requests should include error handling'
    correctionAction: suggest
    enabled: true
    description: 'Encourage proper error handling for network operations'
    cooldown: 180
    tags: ['error-handling', 'robustness']

  # Framework-specific constraints
  - id: react-direct-state-mutation
    type: pattern
    severity: error
    matcher: 'state\.[a-zA-Z]+\s*=|setState\([^)]*[^.]\.[a-zA-Z]+\s*='
    message: 'Direct state mutation detected - use immutable updates'
    correctionAction: block
    enabled: true
    description: 'Prevent direct React state mutations'
    context: ['React', 'Redux']
    cooldown: 0
    tags: ['react', 'state-management']

  # Performance constraints
  - id: synchronous-file-operations
    type: pattern
    severity: warning
    matcher: 'readFileSync|writeFileSync(?![^{]*async)'
    message: 'Consider using async file operations for better performance'
    correctionAction: suggest
    enabled: true
    description: 'Encourage asynchronous file operations'
    cooldown: 300
    tags: ['performance', 'async']

  # Team-specific constraints (can be customized per project)
  - id: unapproved-dependencies
    type: pattern
    severity: warning
    matcher: 'npm install|yarn add|pip install'
    message: 'New dependencies should be discussed with the team'
    correctionAction: warn
    enabled: false  # Disabled by default - teams can enable as needed
    description: 'Flag new dependency additions for team review'
    cooldown: 0
    tags: ['dependencies', 'team-policy']

# Global configuration
globalSettings:
  defaultSeverity: warning
  defaultCorrectionAction: warn
  defaultCooldown: 60
  maxViolationsPerSession: 10
  enableAutoCorrection: false
  
  # Severity levels (used for prioritization and escalation)
  severityLevels:
    critical: 4
    error: 3
    warning: 2
    info: 1

  # Correction actions available
  correctionActions:
    block: 'Block the action and require user intervention'
    warn: 'Allow action but show warning to user'
    suggest: 'Allow action and provide improvement suggestions'
    auto-correct: 'Attempt automatic correction if possible'

# Environment-specific overrides
environments:
  development:
    # Relax some constraints in development
    overrides:
      no-console-log:
        enabled: false
      no-todo-comments:
        severity: info

  production:
    # Stricter constraints in production
    overrides:
      no-console-log:
        severity: critical
      api-key-exposure:
        severity: critical
      unauthorized-commit:
        severity: critical

  testing:
    # Testing-specific constraint adjustments
    overrides:
      network-requests:
        enabled: false  # Allow network requests in tests
      large-functions:
        enabled: false  # Test functions can be longer